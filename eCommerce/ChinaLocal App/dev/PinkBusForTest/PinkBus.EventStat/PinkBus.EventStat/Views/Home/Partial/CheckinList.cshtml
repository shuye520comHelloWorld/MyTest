@using PinkBus.EventStat.Models;

@{
    CheckinSummary summary = ViewBag.Summay;
    SearchModel SM = ViewBag.SearchModel;
}

@model List<CheckinUser>
@if(Model.Count>0){
<table class="table">
    <thead>
        <tr>
            <th width="10%">
                签到者姓名
            </th>
            <th width="10%">
                签到者身份
            </th>
            <th width="13%">
                电话
            </th>
            <th width="10%">
                顾问姓名
            </th>
            <th width="12%">
                直销员编号
            </th>
            <th width="8%">
                签到状态
            </th>
            <th width="7%">
                签到方式
            </th>
            <th width="15%">
                创建时间
            </th>
            <th width="15%">
                签到时间
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach(CheckinUser m in Model){
        <tr>
             <td>
                 <a id="CheckinMan" href="#" data-toggle="modal" data-target="#checkinUserInfo" CustomerKey="@m.CustomerKey" MappingKey="@m.MappingKey">@( m.CustomerName)</a>
                
            </td>
            <td class="checkStatus">
                @(m.TicketType==TicketType.VIP?"贵宾":(m.TicketType==TicketType.Normal?"来宾":"志愿者"))
            </td>
            <td>
                @(m.CustomerPhone)
            </td>
            <td>
                @((int)m.TicketType==2?"/":m.LastName+m.FirstName)
            </td>
            <td>
                @(m.DirectSellerId)
            </td>
            <td>
                @((int)m.TicketType==2?(m.CheckinDate.HasValue?"已签到":"未签到"):((int)m.TicketStatus.Value==5?"已签到":"未签到"))
            </td>
            <td>
                @(m.UpdatedBy=="SMS"?"短信口令":(m.UpdatedBy=="QRCode"?"二维码":(m.UpdatedBy=="ClientCreateNew"?"现场签到":"")))
            </td>
            <td>
                @(m.CreatedDate.ToString("yyyy.MM.dd HH:mm"))
            </td>
            <td>
                @(m.CheckinDate.HasValue?m.CheckinDate.Value.ToString("yyyy.MM.dd HH:mm"):"")
            </td>
        </tr>
        }
    </tbody>
</table>
}
else
{
    <div style="text-align:center;padding-top:100px;"><img src="~/Content/images/nothing.png" /></div>
}

<input type="hidden" id="TotalRow" value="@(SM.TotalRow)" />
<input type="hidden" id="PageCount" value="@(SM.MaxPage)" />
<input type="hidden" id="NormalCheckinCount" value="@(summary.NormalCheckinCount)" />
<input type="hidden" id="NormalCount" value="@(summary.NormalCount)" />
<input type="hidden" id="VIPCheckinCount" value="@(summary.VIPCheckinCount)" />
<input type="hidden" id="VIPCount" value="@(summary.VIPCount)" />
<input type="hidden" id="VolunteerCheckinCount" value="@(summary.VolunteerCheckinCount)" />
<input type="hidden" id="VolunteerCount" value="@(summary.VolunteerCount)" />
